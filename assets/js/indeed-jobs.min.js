jQuery(document).ready(function(a){var b;a(".job_listings").on("update_indeed_results",function(c,d){b&&b.abort();var e=a(this),f=e.find(".job_listings"),g=e.data("api_args"),h={action:"job_manager_get_indeed_listings",api_args:g,page:d};a(".load_more_indeed_jobs",e).addClass("loading"),b=a.ajax({type:"GET",url:job_manager_indeed_jobs.ajax_url,data:h,success:function(b){if(b)try{b.indexOf("<!--WPJM-->")>=0&&(b=b.split("<!--WPJM-->")[1]),b.indexOf("<!--WPJM_END-->")>=0&&(b=b.split("<!--WPJM_END-->")[0]);var c=a.parseJSON(b);c.html&&a(f).append(c.html),c.found_jobs&&c.max_num_pages!==d?a(".load_more_indeed_jobs",e).show().data("page",d):a(".load_more_indeed_jobs",e).hide(),a(f).removeClass("loading"),a(".load_more_indeed_jobs",e).removeClass("loading"),a("li.job_listing",f).css("visibility","visible")}catch(g){}}})}),a(".load_more_indeed_jobs").unbind("click").click(function(){var b=a(this).closest("div.job_listings"),c=a(this).data("page");return c=c?parseInt(c):1,a(this).data("page",c+1),b.triggerHandler("update_indeed_results",[c+1,!0]),!1})});