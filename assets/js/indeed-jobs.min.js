jQuery(document).ready(function(e){var a;e(".job_listings").on("update_indeed_results",function(i,s,d){a&&a.abort();var n=e(this),o=n.find(".job_listings"),t={action:"job_manager_get_indeed_listings",api_args:n.data("api_args"),page:s};e(".load_more_indeed_jobs",n).addClass("loading"),a=e.ajax({type:"GET",url:job_manager_indeed_jobs.ajax_url,data:t,success:function(a){if(a)try{a.indexOf("\x3c!--WPJM--\x3e")>=0&&(a=a.split("\x3c!--WPJM--\x3e")[1]),a.indexOf("\x3c!--WPJM_END--\x3e")>=0&&(a=a.split("\x3c!--WPJM_END--\x3e")[0]);var i=e.parseJSON(a);i.html&&e(o).append(i.html),i.found_jobs&&i.max_num_pages!==s?e(".load_more_indeed_jobs",n).show().data("page",s):e(".load_more_indeed_jobs",n).hide(),e(o).removeClass("loading"),e(".load_more_indeed_jobs",n).removeClass("loading"),e("li.job_listing",o).css("visibility","visible")}catch(e){}}})}),e(".load_more_indeed_jobs").unbind("click").click(function(){var a=e(this).closest("div.job_listings"),i=e(this).data("page");return i=i?parseInt(i):1,e(this).data("page",i+1),a.triggerHandler("update_indeed_results",[i+1,!0]),!1})});