jQuery(document).ready(function(a){var b;a(".job_listings").on("update_indeed_results",function(c,d,e){b&&b.abort();var f=a(this),g=f.find(".job_listings"),h=f.data("api_args"),i={action:"job_manager_get_indeed_listings",api_args:h,page:d};a(".load_more_indeed_jobs",f).addClass("loading"),b=a.ajax({type:"GET",url:job_manager_indeed_jobs.ajax_url,data:i,success:function(b){if(b)try{b.indexOf("<!--WPJM-->")>=0&&(b=b.split("<!--WPJM-->")[1]),b.indexOf("<!--WPJM_END-->")>=0&&(b=b.split("<!--WPJM_END-->")[0]);var c=a.parseJSON(b);c.html&&a(g).append(c.html),c.found_jobs&&c.max_num_pages!==d?a(".load_more_indeed_jobs",f).show().data("page",d):a(".load_more_indeed_jobs",f).hide(),a(g).removeClass("loading"),a(".load_more_indeed_jobs",f).removeClass("loading"),a("li.job_listing",g).css("visibility","visible")}catch(e){}}})}),a(".load_more_indeed_jobs").unbind("click").click(function(){var b=a(this).closest("div.job_listings"),c=a(this).data("page");return c=c?parseInt(c):1,a(this).data("page",c+1),b.triggerHandler("update_indeed_results",[c+1,!0]),!1})});